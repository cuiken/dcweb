<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Solar Cloud - Zever Solar</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <meta name="MobileOptimized" content="320">
    <link href="/assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>

    <link rel="stylesheet" href="assets/plugins/data-tables/DT_bootstrap.css"/>
    <link href="/assets/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/plugins/fullcalendar/fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css"/>

    <link href="/assets/css/style-metronic.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/css/style.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/css/style-responsive.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/css/plugins.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/css/pages/tasks.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/css/themes/light.css" rel="stylesheet" type="text/css" id="style_color"/>
    <link href="/assets/css/custom.css" rel="stylesheet" type="text/css"/>
</head>
<body class="page-header-fixed">
<%- include header.html %>
<div class="clearfix"></div>
<div class="page-container">
    <%- include left_menu.html %>
    <div class="page-content-wrapper">
        <div class="page-content">
            <%- include theme_panel.html %>
            <div class="row">
                <div class="col-md-12">
                    <h3 class="page-title">
                        电量及功率
                        <small>太空站</small>
                    </h3>
                    <ul class="page-breadcrumb breadcrumb">
                        <li>
                            <i class="fa fa-bar-chart-o"></i>
                            <a href="/">图表</a>
                            <i class="fa fa-angle-right"></i>
                        </li>
                        <li>
                            <a href="#">电量及功率</a>
                        </li>
                        <li class="pull-right">
                            <div id="dashboard-report-range" class="dashboard-date-range tooltips" data-placement="top"
                                 data-original-title="Change dashboard date range">
                                <i class="fa fa-calendar"></i>
								<span>
								</span>
                                <i class="fa fa-angle-down"></i>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <ul class="nav nav-pills">
                        <li id="bydays" class="active"><a href="#">日</a></li>
                        <li id="bymonth"><a href="#">月</a></li>
                        <li id="byyear"><a href="#">年</a></li>
                        <li id="bytotal"><a href="#">总计</a></li>
                    </ul>
                </div>
            </div>
            <div id="echarts" style="width: 888px; height: 400px;"></div>

            <div class="row" style="margin-top: 10px;">
                <div class="col-md-12">
                    <table class="table table-hover table-striped">
                        <thead>
                        <tr>
                            <th></th>
                            <th>设备名称</th>
                            <th>状态</th>
                            <th>E-Today(KWh)</th>
                            <th>E-Total(MWh)</th>
                            <th>Pac(KW)</th>
                            <th>百分比</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><input type="checkbox" checked/></td>
                            <td>8882000A10902151</td>
                            <td><i class="fa fa-lightbulb-o"></i></td>
                            <td>7.54</td>
                            <td>2.673</td>
                            <td>1.043</td>
                            <td>100%</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox"/></td>
                            <td>8883600000000000</td>
                            <td><i class="fa fa-times-circle"></i></td>
                            <td>0</td>
                            <td>2.079</td>
                            <td>0</td>
                            <td>0%</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row">

                <div class="col-md-12 col-sm-12">
                    <div class="dataTables_paginate paging_bootstrap">
                        <ul class="pagination" style="visibility: visible;">
                            <li class="prev"><a href="#" title="Prev"><i class="fa fa-angle-left"></i></a></li>
                            <li><a href="#">1</a></li>
                            <li class="active"><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li class="next"><a href="#" title="Next"><i class="fa fa-angle-right"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<%- include footer.html %>
<!--[if lt IE 9]>
<script src="/assets/plugins/respond.min.js"></script>
<script src="/assets/plugins/excanvas.min.js"></script>
<![endif]-->
<script src="/assets/plugins/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="/assets/plugins/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
<script src="/assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/assets/plugins/bootstrap-hover-dropdown/twitter-bootstrap-hover-dropdown.min.js"
        type="text/javascript"></script>
<script src="/assets/plugins/jquery.cokie.min.js" type="text/javascript"></script>
<script src="/assets/plugins/echarts/echarts-plain.js"></script>

<script src="/assets/plugins/bootstrap-daterangepicker/moment.min.js" type="text/javascript"></script>
<script src="/assets/plugins/bootstrap-daterangepicker/daterangepicker.js" type="text/javascript"></script>

<script src="/assets/scripts/app.js" type="text/javascript"></script>
<script src="/assets/scripts/index.js" type="text/javascript"></script>

<script>
    jQuery(document).ready(function () {
        App.init();
        Index.init();
        Index.initCalendar(); // init index page's custom scripts
        Index.initDashboardDaterange();

        var myChart = echarts.init(document.getElementById('echarts'));

        var showCharts = function () {

            myChart.showLoading({
                text: '正在努力的读取数据中...',
                effect: 'whirling'
            });

            $.getJSON('/powerInfo/bydays/2014-05-23', function (data) {

                myChart.hideLoading();

                var xdata = [];
                var ydata = [];
                var unit = data.dataunit;
                data = data.data;

                $.each(data, function (key, val) {

                    xdata.push(val.time);
                    ydata.push(val.value);
                });

                var option = {
                    tooltip: {
                        trigger: 'axis'
                    },
                    legend: {
                        data: ['发电量']
                    },
                    toolbox: {
                        show: true,
                        feature: {
                            mark: {show: true},
                            dataZoom: {show: true},
                            dataView: {show: true, readOnly: false},
                            magicType: {show: true, type: ['line', 'bar']},
                            restore: {show: true},
                            saveAsImage: {show: true}
                        }
                    },
                    calculable: true,
                    dataZoom: {
                        show: false
                    },
                    xAxis: [
                        {
                            type: 'category',
                            data: xdata
                        }
                    ],
                    yAxis: [
                        {
                            type: 'value',
                            axisLabel: {
                                formatter: '{value} ' + unit
                            },
                            splitArea: {show: true}
                        }
                    ],
                    series: [
                        {
                            name: '发电量',
                            type: 'bar',
                            data: ydata
                        }
                    ]
                };
                myChart.setOption(option);

                option.dataZoom.show = true;
                option.dataZoom.start = 0;
                option.dataZoom.end = 50;
                myChart.setOption(option);

            }).error(function () {
                $(".alert").css('display', 'block');
                myChart.clear();
                myChart.dispose();
            });
        };

        showCharts();
    });
</script>
</body>
</html>
